@using System.Web.Optimization
@using STP.Domain
@model STP.Domain.SecurityAndUsers.HAContact

@{
    bool isAdmin = false;
    int portalType = 0;

    string isClosed = "false";
    long analysisId = 0;
    long notiId = 0;
    string refNumber = "";
    string type = "";

    if (Session["UserInfo"] != null)
    {
        var user = (STP.Domain.SecurityAndUsers.UserInfo)Session["UserInfo"];
        portalType = user.UserTypeId;
        if (portalType == 696006 || user.IsAdmin == 1)
        {
            isAdmin = true;
        }
    }

    if (Request.QueryString["isClosed"] != null && Request.QueryString["isClosed"] == "true")
    {
        isClosed = "true";
    }

    if (isClosed == "true")
    {

        if (Session["analysisID"] != null)
        {
            analysisId = Convert.ToInt64(Session["analysisID"]);
        }

        if (Session["NotificationID"] != null)
        {
            notiId = Convert.ToInt64(Session["NotificationID"]);
        }

        if (Session["ESDALRefNumber"] != null)
        {
            refNumber = Convert.ToString(Session["ESDALRefNumber"]);
            refNumber = refNumber.Replace("#", "~");
        }

        if (Session["Type"] != null)
        {
            type = Convert.ToString(Session["Type"]);
        }
    }
}
<style>    
    .detailsPopup {
        flex-direction: column;
        width: 100%;
        pointer-events: auto;
    }
    .labelWidth{
        display:table-cell;
    }
</style>
<div id="contactDetails" class="modal fade" tabindex="-1" role="dialog" style="cursor: pointer;">
    <div class="modal-dialog detailsPopup" style="overflow:unset;">

        <body style="overflow-y: auto;" id="soa-structure-detail">

            <!--main content -->
            <section id="banner" class="map-icons">

                <div id="CloseViewCons" class="row">
                    <div class="card" style="width: 30rem; height: auto; padding-bottom: 2rem;">
                        <div id="check-caution" style="margin-top:15px;margin-right:15px;">
                            @if (ViewBag.ShowXML == 0)
                            {
                                using (Html.BeginForm("                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ", "Application"))
                                {
                                    <div class="row mt-1 main-entry">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <div class="row mb-1" id="table-head">

                                                <span class="text-normal pr-2" style="font-family: lato_light;font-size:25px;">
                                                    Contact details
                                                    <span id="spnclosemap" class="text-normal pr-1"
                                                          style="color:rgba(39, 87, 149, 1);font-size:50px;float:right;margin-top: -23px;font-family: lato_light;">
                                                        &times;
                                                    </span>

                                                </span>
                                            </div>
                                            <div class="row mb-1">
                                                <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                                    <label class="text-normal">Organisation name</label>
                                                </div>
                                                <div class="col-sm-4 col-md-4 col-lg-7">
                                                    @Html.LabelFor(model => model.OrganisationName, Model.OrganisationName, new { @class = "details1 labelWidth", Style = "display: block; width: 14rem;" })
                                                </div>
                                            </div>
                                            <div class="row mb-1">
                                                <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                                    <label class="text-normal">Contact name</label>
                                                </div>
                                                <div class="col-sm-4 col-md-5 col-lg-7">
                                                    @{if (Model.Title != "" && Model.Title != null)
                                                        {
                                                            @Html.LabelFor(model => model.ContactName, Model.ContactName + " (" + Model.Title + ")", new { @class = "details1 labelWidth" })
                                                        }
                                                        else
                                                        {
                                                            @Html.LabelFor(model => model.ContactName, Model.ContactName, new { @class = "details1 labelWidth" })
                                                        }}
                                                </div>
                                            </div>
                                            <div class="row mb-1">
                                                <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                                    <label class="text-normal">Contact address</label>
                                                </div>
                                                <div class="col-sm-4 col-md-5 col-lg-7">
                                                    @Html.LabelFor(model => model.HAAddress1, Model.HAAddress1, new { @class = "details1 labelWidth" })
                                                </div>
                                            </div>
                                            <div class="row mb-1">
                                                <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                                    <label class="text-normal"></label>
                                                </div>
                                                <div class="col-sm-4 col-md-5 col-lg-7">
                                                    @Html.LabelFor(model => model.HAAddress2, Model.HAAddress2, new { @class = "details1 labelWidth" })
                                                </div>
                                            </div>
                                            <div class="row mb-1">
                                                <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                                    <label class="text-normal"></label>
                                                </div>
                                                <div class="col-sm-4 col-md-5 col-lg-7">
                                                    @Html.LabelFor(model => model.HAAddress3, Model.HAAddress3, new { @class = "details1 labelWidth" })
                                                </div>
                                            </div>
                                            <div class="row mb-1">
                                                <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                                    <label class="text-normal"></label>
                                                </div>
                                                <div class="col-sm-4 col-md-5 col-lg-7">
                                                    @Html.LabelFor(model => model.HAAddress4, Model.HAAddress4, new { @class = "details1 labelWidth" })
                                                </div>
                                            </div>
                                            <div class="row mb-1">
                                                <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                                    <label class="text-normal"></label>
                                                </div>
                                                <div class="col-sm-4 col-md-5 col-lg-7">
                                                    @Html.LabelFor(model => model.HAAddress5, Model.HAAddress5, new { @class = "details1 labelWidth" })
                                                </div>
                                            </div>
                                            <div class="row mb-1">
                                                <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                                    <label class="text-normal">Postcode</label>
                                                </div>
                                                <div class="col-sm-4 col-md-5 col-lg-5">
                                                    @Html.LabelFor(model => model.PostCode, Model.PostCode, new { @class = "details1 labelWidth" })
                                                </div>
                                            </div>
                                            <div class="row mb-1">
                                                <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                                    <label class="text-normal">Country</label>
                                                </div>
                                                <div class="col-sm-4 col-md-5 col-lg-5">
                                                    @if (Model.Country != null && Model.Country != "")
                                                    {
                                                        @Html.LabelFor(model => model.Country, Model.Country.Substring(0, 1).ToUpper() + Model.Country.Substring(1).ToLower(), new { @class = "details1 labelWidth" })
                                                    }
                                                </div>
                                            </div>
                                            <div class="row mb-1">
                                                <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                                    <label class="text-normal">Telephone</label>
                                                </div>
                                                <div class="col-sm-4 col-md-5 col-lg-5">
                                                    @Html.LabelFor(model => model.Telephone, Model.Telephone, new { @class = "details1 labelWidth" })
                                                </div>
                                            </div>
                                            <div class="row mb-1">
                                                <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                                    <label class="text-normal">Fax</label>
                                                </div>
                                                <div class="col-sm-4 col-md-5 col-lg-5">
                                                    @Html.LabelFor(model => model.Fax, Model.Fax, new { @class = "details1" })
                                                </div>
                                            </div>
                                            <div class="row mb-1">
                                                <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                                    <label class="text-normal">Email address</label>
                                                </div>
                                                <div class="col-sm-4 col-md-5 col-lg-5 ">
                                                    <a href="mailto:@Model.Email" style="cursor:pointer;text-decoration:none;">@Html.LabelFor(model => model.Email, Model.Email, new { @class = "text-normal text-color2", @style = "display: block;width: 12rem;cursor:pointer;" })</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }

                            }
                            else if (ViewBag.ShowXML == 1)
                            {
                                if (ViewBag.ContactDetails == null || ViewBag.ContactDetails == "")
                                {
                                    <div class="row mt-1 main-entry">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <div class="row mb-1" id="table-head">

                                                <span class="text-normal pr-2" style="font-family: lato_light;font-size:25px;">
                                                    Contact details
                                                    <span id="spnclosemap" class="text-normal pr-1"
                                                          style="color:rgba(39, 87, 149, 1);font-size:50px;float:right;margin-top: -23px;font-family: lato_light;">
                                                        &times;
                                                    </span>

                                                </span>
                                            </div>
                                            <div class="row mb-1">
                                                <div class="col-sm-12 col-md-12 col-lg-12 pr-0">
                                                    <div class="error invalid-feedback" style="display: block !important; text-align: center; font-size: 15px;">No contact details</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                }
                                else
                                {

                                    @Html.Raw(ViewBag.ContactDetails)

                                }
                            }
                        </div>
                    </div>
                    <!-- </div> -->
                    <!-- end of check-caution -->
                </div>

            </section>
            <!--end of main content -->

        </body>
    </div>
</div>
<div class="form form_component" id="form_component" ;>
    <div class="modal" tabindex="-1" role="dialog" id="contactDetailsForMap" style="display: none; overflow-y: auto;">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content" id="ViewRoadContacts" style="overflow: unset; padding-bottom: 2rem; padding-left: 2rem; height: auto; border-radius: 0.3rem;">
                <div id="check-caution" style="margin-top:15px;margin-right:15px;">
                    @if (ViewBag.ShowXML == 0)
                    {
                        using (Html.BeginForm("", "Application"))
                        {
                            <div class="row mt-1 main-entry">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="row mb-1" id="table-head">

                                        <span class="text-normal pr-2" style="font-family: lato_light;font-size:25px;">
                                            Contact details
                                            <span class="text-normal pr-1"
                                                  style="color:rgba(39, 87, 149, 1);font-size:50px;float:right;margin-top: -23px;font-family: lato_light; cursor:pointer;" id="close_contact_popup" >
                                                &times;
                                            </span>

                                        </span>
                                    </div>
                                    <div class="row mb-1">
                                        <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                            <label class="text-normal">Organisation name</label>
                                        </div>
                                        <div class="col-sm-4 col-md-4 col-lg-7">
                                            @Html.LabelFor(model => model.OrganisationName, Model.OrganisationName, new { @class = "details1 labelWidth", Style= "display: block; width: 14rem;" })
                                        </div>
                                    </div>
                                    <div class="row mb-1">
                                        <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                            <label class="text-normal">Contact name</label>
                                        </div>
                                        <div class="col-sm-4 col-md-5 col-lg-7">
                                            @{if (Model.Title != "")
                                                {
                                                    @Html.LabelFor(model => model.ContactName, Model.ContactName + " (" + Model.Title + ")", new { @class = "details1 labelWidth" })
                                                }
                                                else
                                                {
                                                    @Html.LabelFor(model => model.ContactName, Model.ContactName, new { @class = "details1 labelWidth" })
                                                }}
                                        </div>
                                    </div>
                                    <div class="row mb-1">
                                        <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                            <label class="text-normal">Contact address</label>
                                        </div>
                                        <div class="col-sm-4 col-md-5 col-lg-7">
                                            @Html.LabelFor(model => model.HAAddress1, Model.HAAddress1, new { @class = "details1 labelWidth" })
                                        </div>
                                    </div>
                                    <div class="row mb-1">
                                        <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                            <label class="text-normal"></label>
                                        </div>
                                        <div class="col-sm-4 col-md-5 col-lg-7">
                                            @Html.LabelFor(model => model.HAAddress2, Model.HAAddress2, new { @class = "details1 labelWidth" })
                                        </div>
                                    </div>
                                    <div class="row mb-1">
                                        <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                            <label class="text-normal"></label>
                                        </div>
                                        <div class="col-sm-4 col-md-5 col-lg-7">
                                            @Html.LabelFor(model => model.HAAddress3, Model.HAAddress3, new { @class = "details1 labelWidth" })
                                        </div>
                                    </div>
                                    <div class="row mb-1">
                                        <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                            <label class="text-normal"></label>
                                        </div>
                                        <div class="col-sm-4 col-md-5 col-lg-7">
                                            @Html.LabelFor(model => model.HAAddress4, Model.HAAddress4, new { @class = "details1 labelWidth" })
                                        </div>
                                    </div>
                                    <div class="row mb-1">
                                        <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                            <label class="text-normal"></label>
                                        </div>
                                        <div class="col-sm-4 col-md-5 col-lg-7">
                                            @Html.LabelFor(model => model.HAAddress5, Model.HAAddress5, new { @class = "details1 labelWidth" })
                                        </div>
                                    </div>
                                    <div class="row mb-1">
                                        <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                            <label class="text-normal">Postcode</label>
                                        </div>
                                        <div class="col-sm-4 col-md-5 col-lg-5">
                                            @Html.LabelFor(model => model.PostCode, Model.PostCode, new { @class = "details1" })
                                        </div>
                                    </div>
                                    <div class="row mb-1">
                                        <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                            <label class="text-normal">Country</label>
                                        </div>
                                        <div class="col-sm-4 col-md-5 col-lg-5">
                                            @if (Model.Country != null && Model.Country != "")
                                            {
                                                @Html.LabelFor(model => model.Country, Model.Country.Substring(0, 1).ToUpper() + Model.Country.Substring(1).ToLower(), new { @class = "details1" })
                                            }
                                        </div>
                                    </div>
                                    <div class="row mb-1">
                                        <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                            <label class="text-normal">Telephone</label>
                                        </div>
                                        <div class="col-sm-4 col-md-5 col-lg-5">
                                            @Html.LabelFor(model => model.Telephone, Model.Telephone, new { @class = "details1" })
                                        </div>
                                    </div>
                                    <div class="row mb-1">
                                        <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                            <label class="text-normal">Fax</label>
                                        </div>
                                        <div class="col-sm-4 col-md-5 col-lg-5">
                                            @Html.LabelFor(model => model.Fax, Model.Fax, new { @class = "details1" })
                                        </div>
                                    </div>
                                    <div class="row mb-1">
                                        <div class="col-sm-4 col-md-6 col-lg-5 pr-0">
                                            <label class="text-normal">Email address</label>
                                        </div>
                                        <div class="col-sm-4 col-md-5 col-lg-5 input-field">
                                            <a href="mailto:@Model.Email" style="cursor:pointer;">@Html.LabelFor(model => model.Email, Model.Email, new { @class = "text-normal text-color2" })</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }

                    }
                    else if (ViewBag.ShowXML == 1)
                    {
                        if (ViewBag.ContactDetails == null || ViewBag.ContactDetails == "")
                        {
                            <div class="error invalid-feedback" style="display: block !important; text-align: center;">No contact details</div>
                        }
                        else
                        {

                            @Html.Raw(ViewBag.ContactDetails)

                        }
                    }
                </div>
            </div>
        </div>
    </div>

</div>
@*<script src="~/Scripts/Application/ViewContactDetails.js?V@(Session["ProjectVersion"])"></script>*@
