@using PagedList.Mvc
@model PagedList.IPagedList<STP.Domain.SecurityAndUsers.ContactModel>

@{
    int pageSize = 10;
    int listCount = 0;
    listCount = (int)ViewBag.pageSize;
    if (ViewBag.pageSize != null)
    {
        pageSize = ViewBag.pageSize;
    }
    int pageNumber = ViewBag.page;
    int totalPageCount = Model.PageCount;
    int totalItemCount = Model.TotalItemCount;
    int TotalCount = Convert.ToInt32(ViewBag.TotalCount);
}
<style>
    .filters_trans span {
        color: rgba(39, 87, 149, 1);
        font-weight: 300;
        font-style: normal;
        /* font-size: 20.00px; */
        font-family: lato_medium;
        letter-spacing: 0;
        text-decoration: none;
        text-align: center;
        font-size: 16.00px;
    }

    th, td {
        box-sizing: content-box !important;
    }

    .pagination {
        color: rgba(92, 92, 92, 1);
    }
</style>
@Html.Hidden("pageNum", pageNumber)
@Html.Hidden("pageSizeVal", pageSize)
@Html.Hidden("TotalCount", TotalCount)

<div style="background-color: white;" id="Notifiedparties">
    <div class="row pt-4" id="divNotifparty">
        <div class="main-table" id="notif-parties">
            <table>
                <tbody>
                    <tr>
                        <th style="border-radius: 40px 0 0 0;">
                            @Resources.Resource.Contact
                        </th>
                        <th>
                            @Resources.Resource.Organisation
                        </th>
                        <th style="width:15%">
                            @Resources.Resource.ContactType
                        </th>
                        <th>
                            Email
                        </th>
                        <th style="width: 12%;">
                            @Resources.Resource.OnBehalfOf
                        </th>
                    </tr>
                    @if (Model.Count() != 0)
                    {
                        foreach (var item in Model)
                        {
                            <tr>
                                <td class="edit-normal">
                                    @if (item.ContactId > 0)
                                    {
                                        <a href="#" ContactId=@item.ContactId arg2='true' class="text-decoration-link ViewNotifiedParties">
                                            @Html.DisplayFor(modelItem => item.FullName)
                                        </a>
                                    }
                                    else
                                    {
                                        <a href="#" style="text-decoration: none;" class="text-decoration-link">
                                            @Html.DisplayFor(modelItem => item.FullName)
                                        </a>
                                    }
                                </td>
                                <td class="edit-normal">
                                    @Html.DisplayFor(modelItem => item.Organisation)
                                </td>
                                <td class="edit-normal" style="width:15%">
                                    @Html.DisplayFor(modelItem => item.ContactType)
                                </td>
                                <td style="width: 11%;" class="text-color2">
                                    @Html.DisplayFor(modelItem => item.Email)
                                </td>
                                <td>
                                    <a href="#" ContactId=@item.ContactId arg2='true' class="text-decoration-link ViewNotifiedParties" />
                                    @Html.DisplayFor(modelItem => item.DelegatorsOrganisationName)
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr class="bgColor2">
                            <td colspan="8" style="text-align: center; color:red">
                                @Resources.Resource.NoRecordFound
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>


        @if (Model.Count > 0)
        {
            <div class="row pagination-container-new" id="comp-pagination">
                <div class="col-lg-3">
                    @if (totalItemCount > 0)
                    {
                        <div class="text-color2 total-records-number">
                            Total number of records : @totalItemCount
                        </div>}
                </div>
                <div class="col-lg-6 text-center">
                    @if (listCount < totalItemCount)
                    {
                        <div class="table-pagination">
                            @Html.PagedListPager(Model, page => Url.Action("DisplayNotifiedparties",
                               new
                               {
                                   B7vy6imTleYsMr6Nlv7VQ =
                                                                     STP.Web.Helpers.EncryptionUtility.Encrypt("analysisId=" + ViewBag.AnalysisId),
                                   page
                               }),
                               new PagedListRenderOptions
                               {
                                   DisplayLinkToPreviousPage = PagedListDisplayMode.IfNeeded,
                                   DisplayLinkToNextPage = PagedListDisplayMode.IfNeeded,
                                   LinkToPreviousPageFormat = "<img src='/Content/assets/images/left-chevlon.svg' width='10'>",
                                   LinkToNextPageFormat = "<img src='/Content/assets/images/right-chevlon.svg' width='10'>",
                                   DisplayLinkToFirstPage = PagedListDisplayMode.IfNeeded,
                                   DisplayLinkToLastPage = PagedListDisplayMode.IfNeeded,
                                   MaximumPageNumbersToDisplay = 3,
                                   DisplayEllipsesWhenNotShowingAllPageNumbers = true,
                                   EllipsesFormat = "...",
                                   LinkToFirstPageFormat = "<div style='position:absolute;'><img src='/Content/assets/images/left-chevlon.svg' width='10'><img src='/Content/assets/images/left-chevlon.svg' width='10'></div>",
                                   LinkToLastPageFormat = "<div style='position:absolute;'><img src='/Content/assets/images/right-chevlon.svg' width='10'><img src='/Content/assets/images/right-chevlon.svg' width='10'></div>"
                               });
                        </div>

                        @Html.Hidden("TotalPages", totalPageCount)
                        @Html.Hidden("pageSizeVal", pageSize)
                        @Html.Hidden("pageNum", pageNumber)
                    }
                </div>
                @if (Model.TotalItemCount > 10)
                {
                    <div class="col-lg-3 col-md-3 col-sm-12 text-normal pr-0">
                        Number of items to display per page
                        <select class="form-select mb-3" style="width:100px;" aria-label=".form-select-lg example" id="pageSizeSelect">
                            <option val="10" @(pageSize == 10 ? "selected" : "")>10</option>
                            <option val="20" @(pageSize == 20 ? "selected" : "")>20</option>
                            <option val="50" @(pageSize == 50 ? "selected" : "")>50</option>
                            <option val="100" @(pageSize == 100 ? "selected" : "")>100</option>
                        </select>
                    </div>
                }
            </div>
        }
    </div>
</div>

@*<script src="~/Scripts/CspJs/Notification/DisplayNotifiedparties.js?V@(Session["ProjectVersion"])"></script>*@
